<smart-energy-page-header title="Locaties" description="Opgeslagen locaties en calculaties.">
  <div
    icon
    class="w-16 h-16 flex items-center justify-center bg-white fill-secondary rounded-full border"
  >
    <svg xmlns="http://www.w3.org/2000/svg" height="28" viewBox="0 0 384 512">
      <path
        d="M215.7 499.2C267 435 384 279.4 384 192 384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2 12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"
      />
    </svg>
  </div>

  <smart-energy-search
    buttons
    [hasButtons]="true"
    [(searchText)]="searchQuery"
    (searchTextChange)="loadLocations(true)"
  >
    <button class="btn btn-secondary join-item" (click)="locationCreateModal.openModal()">
      Nieuw
    </button>
  </smart-energy-search>
</smart-energy-page-header>

<div>
  <a *ngFor="let location of locations" [routerLink]="['/locations', location.id]">
    <div class="card bg-base-100 shadow-xl mb-4">
      <div class="card-body flex-row items-center justify-between">
        <div class="flex items-center">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="28"
            class="fill-secondary"
            viewBox="0 0 512 512"
          >
            <path
              d="M256 0c17.7 0 32 14.3 32 32V66.7C368.4 80.1 431.9 143.6 445.3 224H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H445.3C431.9 368.4 368.4 431.9 288 445.3V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V445.3C143.6 431.9 80.1 368.4 66.7 288H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H66.7C80.1 143.6 143.6 80.1 224 66.7V32c0-17.7 14.3-32 32-32zM128 256a128 128 0 1 0 256 0 128 128 0 1 0 -256 0zm128-80a80 80 0 1 1 0 160 80 80 0 1 1 0-160z"
            />
          </svg>

          <div class="mx-6">
            <p class="card-title">
              {{ location.name }}
            </p>
            <p class="text-sm text-gray-500">
              {{ location.postalCode }}
              {{ location.residence }}
            </p>
          </div>
        </div>

        <div>
          <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512">
            <path
              d="M352 0c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9L370.7 96 201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L416 141.3l41.4 41.4c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V32c0-17.7-14.3-32-32-32H352zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"
            />
          </svg>
        </div>
      </div>
    </div>
  </a>

  <div *ngIf="!locations.length" class="card bg-base-100 shadow-xl mb-4">
    <div class="card-body">
      <h2 class="card-title justify-center">Geen locaties gevonden</h2>
    </div>
  </div>

  <div
    infiniteScroll
    (scrolled)="loadLocations(false)"
    [infiniteScrollContainer]="appComponentDiv"
  ></div>
</div>

<smart-energy-create-location-modal #locationCreateModal (locationCreated)="loadLocations(true)" />
